{% extends 'layout.html' %}
{% from 'users/macros.html' import user_stub %}

{% block head %}
<link rel="stylesheet" href="/static/css/users.css" />
<link rel="stylesheet" href="/static/css/projects.css" />
{% endblock %}

{% from 'projects/macros.html' import project_icon %}

{% block content %}
<div class="card shadow m-bottom">
    <div class="card-header project-header">
        <div class="d-inline-block" >
        {{ project_icon(project) }}
        </div>
        <h1 class="d-inline-block">
            {{ project.name }}
        </h1>
    </div>
    <div class="card-block">
        {% if project.description %}
            {{ project.description | markdown }}
        {% endif %}

        <p>
            <b>Lead:</b> {{ user_stub(project.lead) }}
        </p>

        {% if project.repo %}
        <p>
            <b>Repo:</b>
            <a href="{{ project.repo }}">{{ project.repo }}</a>
        </p>
        {% endif %}

        {% if project.homepage %}
        <p>
            <b>Homepage:</b>
            <a href="{{ project.homepage }}">{{ project.homepage }}</a>
        </p>
        {% endif %}

    </div>
</div>

{% if project.tickets %}
{% from 'tickets/macros.html' import tickets_preview %}
<div class="card shadow">
    <div class="card-header" >
        <h1>Open Tickets</h1>
    </div>
    <div id="tickets" class="card-block">
        {{ tickets_preview(project.tickets) }}
    </div>
</div>
{% else %}
<div class="card shadow" >
    <div class="card-header" >
        <h1>No Open Tickets!</h1>
    </div>
</div>
{% endif %}
{% endblock %}
